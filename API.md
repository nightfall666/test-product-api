# Документация REST API для управления товарами

## Общая информация
- **Фреймворк**: Laravel
- **База данных**: MySQL
- **Формат ответа**: JSON
- **Аутентификация**: Bearer токен (Laravel Sanctum)

## Эндпоинты аутентификации

### 1. Регистрация
- **Метод**: POST
- **URL**: `/api/register`
- **Тело запроса**:
    - `name` (строка, обязательное) — Имя пользователя
    - `email` (строка, обязательное) — Email пользователя
    - `password` (строка, обязательное) — Пароль (минимум 8 символов)
- **Пример запроса**:
  ```json
  {
    "name": "Иван Иванов",
    "email": "ivan@example.com",
    "password": "password123"
  }
  ```
- **Успешный ответ (201)**:
  ```json
  {
    "access_token": "1|ваш_токен",
    "token_type": "Bearer"
  }
  ```
- **Ошибка (422)**: Неверные данные (например, email уже занят)

### 2. Вход
- **Метод**: POST
- **URL**: `/api/login`
- **Тело запроса**:
    - `email` (строка, обязательное) — Email пользователя
    - `password` (строка, обязательное) — Пароль
- **Пример запроса**:
  ```json
  {
    "email": "ivan@example.com",
    "password": "password123"
  }
  ```
- **Успешный ответ (200)**:
  ```json
  {
    "access_token": "1|ваш_токен",
    "token_type": "Bearer"
  }
  ```
- **Ошибка (401)**: Неверные учетные данные
- **Ошибка (422)**: Неверный формат данных

### 3. Выход
- **Метод**: POST
- **URL**: `/api/logout`
- **Заголовки**:
    - `Authorization: Bearer {token}`
- **Успешный ответ (200)**:
  ```json
  {
    "message": "Выход выполнен успешно"
  }
  ```
- **Ошибка (401)**: Неверный или отсутствующий токен

## Эндпоинты товаров
Все эндпоинты товаров требуют заголовок `Authorization: Bearer {token}`.

### 1. Список товаров
- **Метод**: GET
- **URL**: `/api/products`
- **Параметры**:
    - `page` (целое число, необязательный) — Номер страницы для пагинации
    - `per_page` (целое число, необязательный, по умолчанию 15) — Количество элементов на странице
    - `category` (строка, необязательный) — Фильтр по slug категории
    - `in_stock` (булево, необязательный) — Фильтр по наличию
- **Пример запроса**: `GET /api/products?page=1&category=electronics&in_stock=true`
- **Успешный ответ (200)**:
  ```json
  {
    "products": [
      {
        "id": 1,
        "name": "Ноутбук",
        "price": 999.99,
        "category": "electronics",
        "in_stock": true
      }
    ],
    "total_in_stock": 999.99
  }
  ```
- **Ошибка (400)**: Неверные параметры (`per_page` или `in_stock`)
- **Ошибка (401)**: Неверный или отсутствующий токен

### 2. Создание товара
- **Метод**: POST
- **URL**: `/api/products`
- **Тело запроса**:
    - `name` (строка, обязательное) — Название товара
    - `price` (число, обязательное) — Цена товара
    - `category_slug` (строка, обязательное) — Slug категории
    - `in_stock` (булево, необязательный, по умолчанию true) — Наличие
- **Пример запроса**:
  ```json
  {
    "name": "Телефон",
    "price": 499.99,
    "category_slug": "electronics"
  }
  ```
- **Успешный ответ (201)**:
  ```json
  {
    "id": 2,
    "name": "Телефон",
    "price": 499.99,
    "category": "electronics",
    "in_stock": true
  }
  ```
- **Ошибка (401)**: Неверный или отсутствующий токен
- **Ошибка (422)**: Неверные данные

### 3. Получение товара
- **Метод**: GET
- **URL**: `/api/products/{id}`
- **Пример запроса**: `GET /api/products/1`
- **Успешный ответ (200)**:
  ```json
  {
    "id": 1,
    "name": "Ноутбук",
    "price": 999.99,
    "category": "electronics",
    "in_stock": true
  }
  ```
- **Ошибка (400)**: Неверный ID
- **Ошибка (401)**: Неверный или отсутствующий токен
- **Ошибка (404)**: Товар не найден

### 4. Обновление товара
- **Метод**: PUT
- **URL**: `/api/products/{id}`
- **Тело запроса**:
    - `name` (строка, необязательное)
    - `price` (число, необязательное)
    - `category_slug` (строка, необязательное)
    - `in_stock` (булево, необязательное)
- **Пример запроса**:
  ```json
  {
    "price": 899.99,
    "in_stock": false
  }
  ```
- **Успешный ответ (200)**:
  ```json
  {
    "id": 1,
    "name": "Ноутбук",
    "price": 899.99,
    "category": "electronics",
    "in_stock": false
  }
  ```
- **Ошибка (400)**: Неверный ID
- **Ошибка (401)**: Неверный или отсутствующий токен
- **Ошибка (404)**: Товар не найден
- **Ошибка (422)**: Неверные данные

### 5. Удаление товара
- **Метод**: DELETE
- **URL**: `/api/products/{id}`
- **Пример запроса**: `DELETE /api/products/1`
- **Успешный ответ (200)**:
  ```json
  {
    "message": "Товар успешно удален"
  }
  ```
- **Ошибка (400)**: Неверный ID
- **Ошибка (401)**: Неверный или отсутствующий токен
- **Ошибка (404)**: Товар не найден
